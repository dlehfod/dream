<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morpheus Twin | ê¿ˆ ë¶„ì„ì†Œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050510;
            --bg-gradient: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent-gold: #d4af37;
            --accent-purple: #bb86fc;
            --text-main: #e0e0e0;
            --text-muted: #a0a0a0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-deep);
            color: var(--text-main);
            min-height: 100vh;
            line-height: 1.8;
            overflow-x: hidden;
        }

        /* ==========================================
           íˆì–´ë¡œ ì„¹ì…˜ - ëª½í™˜ì ì¸ ì²« í™”ë©´
        ========================================== */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            background: radial-gradient(ellipse at bottom, #1b2838 0%, #090a0f 100%);
        }

        /* ë³„ ë°°ê²½ */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* ë‹¬ */
        .moon {
            position: absolute;
            top: 12%;
            right: 18%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle at 30% 30%, #fffde7, #ffd54f, #ffb300);
            border-radius: 50%;
            box-shadow: 
                0 0 60px rgba(255, 215, 0, 0.4),
                0 0 100px rgba(255, 215, 0, 0.2),
                inset -15px -10px 20px rgba(0,0,0,0.1);
            animation: moonGlow 4s ease-in-out infinite alternate;
        }

        @keyframes moonGlow {
            0% { box-shadow: 0 0 60px rgba(255, 215, 0, 0.4), 0 0 100px rgba(255, 215, 0, 0.2); }
            100% { box-shadow: 0 0 80px rgba(255, 215, 0, 0.6), 0 0 140px rgba(255, 215, 0, 0.3); }
        }

        /* ë– ë‹¤ë‹ˆëŠ” ë¹› ì…ì */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(187, 134, 252, 0.5);
            border-radius: 50%;
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-100vh) scale(1);
                opacity: 0;
            }
        }

        /* íˆì–´ë¡œ ì½˜í…ì¸  */
        .hero-content {
            text-align: center;
            z-index: 10;
            padding: 0 30px;
            padding-bottom: 120px; /* ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„°ì™€ ê°„ê²© í™•ë³´ */
            animation: fadeInUp 1.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 3.5rem;
            color: var(--accent-gold);
            margin-bottom: 16px;
            letter-spacing: 6px;
            text-shadow: 0 0 40px rgba(212, 175, 55, 0.5);
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--text-muted);
            font-weight: 300;
            margin-bottom: 50px;
            letter-spacing: 3px;
        }

        /* ì¥ì‹ì„  */
        .divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
        }

        .divider-line {
            width: 60px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
        }

        .divider-symbol {
            font-size: 1.2rem;
            color: var(--accent-gold);
        }

        /* íˆì–´ë¡œ ì„¤ëª… */
        .hero-description {
            max-width: 520px;
            margin: 0 auto;
        }

        .hero-quote {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.15rem;
            color: var(--accent-purple);
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .hero-author {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 35px;
        }

        /* ëª½í™˜ì  ë©”ì‹œì§€ ì„¹ì…˜ */
        .dream-message {
            margin-top: 45px;
            position: relative;
        }

        .dream-message-inner {
            position: relative;
            padding: 35px 30px;
            background: linear-gradient(135deg, 
                rgba(187, 134, 252, 0.03) 0%, 
                rgba(212, 175, 55, 0.02) 50%,
                rgba(106, 17, 203, 0.03) 100%);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.06);
            overflow: hidden;
        }

        .dream-message-inner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(187, 134, 252, 0.08) 0%, transparent 50%);
            animation: auroraShift 8s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes auroraShift {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(10%, 10%) rotate(120deg); }
            66% { transform: translate(-10%, 5%) rotate(240deg); }
        }

        .dream-text {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.1rem;
            line-height: 2.2;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .dream-text .line {
            display: block;
            opacity: 0;
            animation: lineReveal 1s ease forwards;
        }

        .dream-text .line:nth-child(1) { animation-delay: 0.3s; }
        .dream-text .line:nth-child(2) { animation-delay: 0.6s; }

        @keyframes lineReveal {
            from { 
                opacity: 0; 
                transform: translateY(10px);
                filter: blur(4px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
                filter: blur(0);
            }
        }

        .dream-text .highlight {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .dream-text .glow-word {
            color: rgba(255, 255, 255, 0.95);
            text-shadow: 0 0 20px rgba(187, 134, 252, 0.5),
                         0 0 40px rgba(187, 134, 252, 0.3);
        }

        /* ìœµí•© ì„¹ì…˜ - ì¬ë””ìì¸ */
        .fusion-section {
            margin-top: 55px;
            perspective: 1000px;
        }

        .fusion-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        /* ì¶”ìƒì ì¸ ì‹¬ë³¼ ì¹´ë“œ */
        .symbol-card {
            width: 110px;
            height: 140px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: default;
            transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .symbol-card:hover {
            transform: translateY(-5px);
        }

        .symbol-card::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 16px;
            padding: 1px;
            background: linear-gradient(160deg, 
                rgba(255,255,255,0.15) 0%, 
                rgba(255,255,255,0) 50%,
                rgba(255,255,255,0.05) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
        }

        .symbol-card-inner {
            width: 100%;
            height: 100%;
            background: rgba(15, 15, 30, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        /* ì‹¬ë³¼ ì•„ì´ì½˜ - SVG ìŠ¤íƒ€ì¼ */
        .symbol-icon {
            width: 44px;
            height: 44px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .symbol-icon svg {
            width: 100%;
            height: 100%;
            stroke-width: 1.2;
            fill: none;
        }

        .symbol-card.psychology .symbol-icon svg {
            stroke: var(--accent-purple);
            filter: drop-shadow(0 0 8px rgba(187, 134, 252, 0.5));
        }

        .symbol-card.fortune .symbol-icon svg {
            stroke: var(--accent-gold);
            filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.5));
        }

        /* í˜¸ë²„ ì‹œ ê¸€ë¡œìš° */
        .symbol-card.psychology:hover .symbol-icon svg {
            filter: drop-shadow(0 0 15px rgba(187, 134, 252, 0.8));
        }

        .symbol-card.fortune:hover .symbol-icon svg {
            filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.8));
        }

        /* ì˜¤ë¼ ë§ íš¨ê³¼ */
        .symbol-aura {
            position: absolute;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            opacity: 0.4;
            animation: auraBreath 4s ease-in-out infinite;
        }

        .symbol-card.psychology .symbol-aura {
            background: radial-gradient(circle, rgba(187, 134, 252, 0.3) 0%, transparent 70%);
        }

        .symbol-card.fortune .symbol-aura {
            background: radial-gradient(circle, rgba(212, 175, 55, 0.3) 0%, transparent 70%);
            animation-delay: 2s;
        }

        @keyframes auraBreath {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.3); opacity: 0.5; }
        }

        .symbol-label {
            font-size: 0.65rem;
            letter-spacing: 2.5px;
            text-transform: uppercase;
            opacity: 0.7;
            font-weight: 300;
        }

        .symbol-card.psychology .symbol-label { color: var(--accent-purple); }
        .symbol-card.fortune .symbol-label { color: var(--accent-gold); }

        .symbol-sublabel {
            font-family: 'Noto Serif KR', serif;
            font-size: 0.75rem;
            opacity: 0.5;
            letter-spacing: 1px;
        }

        /* ì—°ê²° ìš”ì†Œ - ë¯¸ë‹ˆë©€í•œ ë¼ì¸ */
        .fusion-connector {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 0 10px;
        }

        .connector-line {
            width: 40px;
            height: 1px;
            background: linear-gradient(90deg, 
                rgba(187, 134, 252, 0.6), 
                rgba(255, 255, 255, 0.3),
                rgba(212, 175, 55, 0.6));
            position: relative;
        }

        .connector-line::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            animation: connectorPulse 3s ease-in-out infinite;
        }

        @keyframes connectorPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
            50% { transform: translate(-50%, -50%) scale(1.5); opacity: 1; }
        }

        .connector-symbol {
            font-size: 1rem;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.8;
        }

        /* íƒœê·¸ë¼ì¸ */
        .fusion-tagline {
            text-align: center;
            margin-top: 35px;
            font-family: 'Noto Serif KR', serif;
            font-size: 0.9rem;
            letter-spacing: 3px;
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
            animation-delay: 1s;
        }

        .fusion-tagline span {
            background: linear-gradient(135deg, 
                rgba(187, 134, 252, 0.9) 0%, 
                rgba(255, 255, 255, 0.7) 50%, 
                rgba(212, 175, 55, 0.9) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„° */
        .scroll-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            animation: bounce 2s infinite;
            z-index: 10;
        }

        .scroll-indicator span {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 8px;
            letter-spacing: 3px;
        }

        .scroll-arrow {
            width: 24px;
            height: 24px;
            border-right: 2px solid var(--accent-gold);
            border-bottom: 2px solid var(--accent-gold);
            transform: rotate(45deg);
            opacity: 0.6;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(8px); }
            60% { transform: translateX(-50%) translateY(4px); }
        }

        /* ==========================================
           ë©”ì¸ ì„¹ì…˜
        ========================================== */
        .main-section {
            background: var(--bg-gradient);
            position: relative;
            min-height: 100vh;
        }

        /* ëª½í™˜ì ì¸ ë°°ê²½ íš¨ê³¼ */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            z-index: 0;
            animation: float 10s infinite alternate;
            pointer-events: none;
        }
        .orb-1 { width: 300px; height: 300px; background: rgba(106, 17, 203, 0.3); top: -50px; left: -50px; }
        .orb-2 { width: 400px; height: 400px; background: rgba(37, 117, 252, 0.2); bottom: -100px; right: -100px; }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 50px); }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 80px 20px;
            position: relative;
            z-index: 1;
        }

        /* ì„¹ì…˜ ì¸íŠ¸ë¡œ */
        .section-intro {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-intro h2 {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.6rem;
            color: var(--accent-purple);
            margin-bottom: 12px;
            letter-spacing: 2px;
        }

        .section-intro p {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        /* ì…ë ¥ í¼ ì„¹ì…˜ */
        .dream-form {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .form-group { margin-bottom: 25px; }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 0.95rem;
            color: var(--accent-purple);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        textarea {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 16px;
            color: #fff;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            font-size: 1rem;
            line-height: 1.7;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent-purple);
            background: rgba(0, 0, 0, 0.5);
        }

        textarea::placeholder {
            color: rgba(255, 255, 255, 0.35);
        }

        .btn-analyze {
            width: 100%;
            padding: 18px;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.05rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
            letter-spacing: 1px;
        }

        .btn-analyze:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37, 117, 252, 0.4);
        }

        .btn-analyze:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        #loading {
            display: none;
            text-align: center;
            margin: 50px 0;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: var(--accent-gold);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ê²°ê³¼ ì„¹ì…˜ */
        #result {
            display: none;
            margin-top: 50px;
            animation: slideUp 0.8s ease-out;
        }

        .result-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid;
        }

        .psychology { border-color: var(--accent-purple); }
        .prophecy { border-color: var(--accent-gold); }

        .result-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.4rem;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 12px;
            letter-spacing: 1px;
        }

        .psychology .result-title { color: var(--accent-purple); }
        .prophecy .result-title { color: var(--accent-gold); }

        .result-content {
            font-size: 1rem;
            line-height: 2.2;
            color: rgba(255, 255, 255, 0.85);
        }

        /* ========== ê²°ê³¼ í…ìŠ¤íŠ¸ ê°•ì¡° ìŠ¤íƒ€ì¼ ========== */
        
        /* strong íƒœê·¸ - ë§¤ìš° ëˆˆì— ë„ê²Œ */
        .result-content strong,
        .result-content b {
            font-weight: 700;
            padding: 1px 6px;
            border-radius: 4px;
            margin: 0 2px;
        }

        .psychology .result-content strong,
        .psychology .result-content b {
            color: #e0b3ff;
            background: linear-gradient(135deg, rgba(187, 134, 252, 0.25), rgba(106, 17, 203, 0.15));
            text-shadow: 0 0 15px rgba(187, 134, 252, 0.6);
            border-bottom: 2px solid rgba(187, 134, 252, 0.5);
        }

        .prophecy .result-content strong,
        .prophecy .result-content b {
            color: #ffe082;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.25), rgba(255, 179, 0, 0.15));
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.6);
            border-bottom: 2px solid rgba(212, 175, 55, 0.5);
        }

        /* ë¬¸ë‹¨ ìŠ¤íƒ€ì¼ */
        .result-content p {
            margin-bottom: 18px;
        }

        /* ë¬¸ë‹¨ êµ¬ë¶„ì */
        .result-paragraph {
            display: block;
            margin-bottom: 20px;
            padding-left: 15px;
            border-left: 2px solid rgba(255, 255, 255, 0.1);
        }

        .psychology .result-paragraph {
            border-left-color: rgba(187, 134, 252, 0.3);
        }

        .prophecy .result-paragraph {
            border-left-color: rgba(212, 175, 55, 0.3);
        }

        /* ë©”ì¸ ì œëª© - ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .result-main-title {
            display: block;
            font-family: 'Noto Serif KR', serif;
            font-size: 1.2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            padding: 18px 25px;
            border-radius: 12px;
            letter-spacing: 1px;
        }

        .psychology .result-main-title {
            background: linear-gradient(135deg, rgba(187, 134, 252, 0.2), rgba(106, 17, 203, 0.15));
            color: #d4b3ff;
            border: 1px solid rgba(187, 134, 252, 0.4);
            box-shadow: 0 0 20px rgba(187, 134, 252, 0.2);
        }

        .prophecy .result-main-title {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(255, 179, 0, 0.15));
            color: #ffe082;
            border: 1px solid rgba(212, 175, 55, 0.4);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        /* ì†Œì œëª© ìŠ¤íƒ€ì¼ */
        .result-subtitle {
            display: block;
            font-family: 'Noto Serif KR', serif;
            font-size: 1.05rem;
            font-weight: 600;
            margin: 28px 0 14px 0;
            padding: 10px 15px;
            border-radius: 8px;
            position: relative;
        }

        .psychology .result-subtitle {
            color: #d4b3ff;
            background: rgba(187, 134, 252, 0.1);
            border-left: 4px solid var(--accent-purple);
        }

        .prophecy .result-subtitle {
            color: #ffe082;
            background: rgba(212, 175, 55, 0.1);
            border-left: 4px solid var(--accent-gold);
        }

        /* ì¡°ì–¸/ê²°ë¡  ë°•ìŠ¤ */
        .result-advice {
            display: block;
            margin: 25px 0;
            padding: 20px;
            border-radius: 12px;
            position: relative;
        }

        .psychology .result-advice {
            background: linear-gradient(135deg, rgba(187, 134, 252, 0.12), rgba(106, 17, 203, 0.08));
            border: 1px solid rgba(187, 134, 252, 0.25);
        }

        .prophecy .result-advice {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.12), rgba(255, 179, 0, 0.08));
            border: 1px solid rgba(212, 175, 55, 0.25);
        }

        .result-advice::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: -12px;
            left: 20px;
            font-size: 1.2rem;
            background: var(--bg-deep);
            padding: 0 8px;
        }

        /* ë©´ì±…ì¡°í•­ */
        .result-disclaimer {
            display: block;
            margin-top: 35px;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
            text-align: center;
            font-style: italic;
            border: 1px dashed rgba(255, 255, 255, 0.1);
        }

        /* êµ¬ë¶„ì„  */
        .result-divider {
            display: block;
            width: 80px;
            height: 2px;
            margin: 30px auto;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            border-radius: 2px;
        }

        /* ê¸¸ëª½/í‰ëª½ ë°°ì§€ */
        .badge-good {
            display: inline-block;
            padding: 4px 12px;
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(34, 197, 94, 0.15));
            color: #4ade80;
            border: 1px solid rgba(74, 222, 128, 0.4);
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.95rem;
        }

        .badge-bad {
            display: inline-block;
            padding: 4px 12px;
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.2), rgba(239, 68, 68, 0.15));
            color: #f87171;
            border: 1px solid rgba(248, 113, 113, 0.4);
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.95rem;
        }

        .badge-warning {
            display: inline-block;
            padding: 4px 12px;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.15));
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.4);
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.95rem;
        }

        /* ì—ëŸ¬ ë©”ì‹œì§€ */
        .error-message {
            background: rgba(255, 82, 82, 0.2);
            border: 1px solid rgba(255, 82, 82, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            color: #ff8a8a;
            display: none;
        }

        footer {
            text-align: center;
            padding: 50px 0;
            color: var(--text-muted);
            font-size: 0.85rem;
            line-height: 1.8;
        }

        /* ì• ë‹ˆë©”ì´ì…˜ ìœ í‹¸ */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 768px) {
            .hero {
                min-height: 100vh;
                padding-top: 60px;
            }
            .hero-content {
                padding: 0 20px;
                padding-bottom: 100px;
            }
            .hero-title { 
                font-size: 2rem; 
                letter-spacing: 2px;
                margin-top: 20px;
            }
            .hero-subtitle { 
                font-size: 0.85rem;
                letter-spacing: 1px;
            }
            .hero-quote {
                font-size: 0.95rem;
            }
            .moon {
                width: 60px;
                height: 60px;
                top: 5%;
                right: 8%;
            }
            .divider {
                margin-bottom: 25px;
            }
            .dream-message {
                margin-top: 30px;
            }
            .dream-text {
                font-size: 0.95rem;
                line-height: 1.9;
            }
            .dream-message-inner {
                padding: 20px 15px;
            }
            .fusion-section {
                margin-top: 35px;
            }
            .symbol-card {
                width: 90px;
                height: 115px;
            }
            .symbol-icon {
                width: 32px;
                height: 32px;
            }
            .symbol-label {
                font-size: 0.5rem;
                letter-spacing: 1.5px;
            }
            .symbol-sublabel {
                font-size: 0.6rem;
            }
            .fusion-connector {
                padding: 0 5px;
            }
            .connector-line {
                width: 30px;
            }
            .fusion-tagline {
                font-size: 0.8rem;
                margin-top: 25px;
            }
            .section-intro h2 { font-size: 1.4rem; }
            .dream-form { padding: 25px; }
        }

        @media (max-width: 480px) {
            .hero {
                padding-top: 50px;
            }
            .hero-content { 
                padding: 0 15px; 
                padding-bottom: 80px; 
            }
            .hero-title { 
                font-size: 1.6rem; 
                letter-spacing: 1px;
                margin-top: 15px;
            }
            .hero-subtitle {
                font-size: 0.75rem;
                margin-bottom: 30px;
            }
            .hero-quote {
                font-size: 0.85rem;
            }
            .hero-author {
                font-size: 0.75rem;
                margin-bottom: 25px;
            }
            .divider {
                margin-bottom: 20px;
            }
            .divider-line {
                width: 40px;
            }
            .moon {
                width: 50px;
                height: 50px;
                top: 3%;
                right: 5%;
            }
            .dream-message { margin-top: 25px; }
            .dream-message-inner { padding: 15px 12px; }
            .dream-text { 
                font-size: 0.85rem; 
                line-height: 1.8;
            }
            .fusion-section { margin-top: 30px; }
            .fusion-container { gap: 8px; }
            .symbol-card {
                width: 80px;
                height: 100px;
            }
            .symbol-card-inner {
                gap: 8px;
            }
            .symbol-icon {
                width: 28px;
                height: 28px;
            }
            .symbol-label {
                font-size: 0.45rem;
            }
            .symbol-sublabel {
                font-size: 0.55rem;
            }
            .connector-line { width: 15px; }
            .connector-symbol { font-size: 0.75rem; }
            .fusion-tagline {
                font-size: 0.7rem;
                margin-top: 20px;
            }
            .scroll-indicator span {
                font-size: 0.6rem;
            }
            .scroll-arrow {
                width: 18px;
                height: 18px;
            }
        }
    </style>
</head>
<body>

    <!-- ==========================================
         íˆì–´ë¡œ ì„¹ì…˜ - ëª½í™˜ì ì¸ ì²« í™”ë©´
    ========================================== -->
    <section class="hero">
        <!-- ë³„ ë°°ê²½ -->
        <div class="stars" id="stars"></div>
        
        <!-- ë‹¬ -->
        <div class="moon"></div>

        <!-- ë– ë‹¤ë‹ˆëŠ” ì…ì -->
        <div class="particles" id="particles"></div>

        <!-- íˆì–´ë¡œ ì½˜í…ì¸  -->
        <div class="hero-content">
            <h1 class="hero-title">Morpheus Twin</h1>
            <p class="hero-subtitle">ë¬´ì˜ì‹ì˜ ì§€ë„ì™€ ë¯¸ë˜ì˜ ë‚˜ì¹¨ë°˜</p>
            
            <div class="divider">
                <div class="divider-line"></div>
                <span class="divider-symbol">â˜½</span>
                <div class="divider-line"></div>
            </div>

            <div class="hero-description">
                <p class="hero-quote">"ê¿ˆì€ ë¬´ì˜ì‹ìœ¼ë¡œ ê°€ëŠ” ì™•ë„(ç‹é“)ì´ë‹¤"</p>
                <p class="hero-author">â€” ì¹´ë¥¼ ìœµ</p>
                
            </div>

            <!-- ëª½í™˜ì  ë©”ì‹œì§€ ì„¹ì…˜ -->
            <div class="dream-message">
                <div class="dream-message-inner">
                    <p class="dream-text">
                        <span class="line">ë§¤ì¼ ë°¤ í¼ì³ì§€ëŠ” <span class="glow-word">ê¿ˆ</span>ì˜ ì¥ë§‰ ì†ì—</span>
                        <span class="line">ë‹¹ì‹ ì˜ <span class="highlight">ë‚´ë©´ì´ ì†ì‚­ì´ëŠ” ë¹„ë°€</span>ì´ ì ë“¤ì–´ ìˆìŠµë‹ˆë‹¤</span>
                    </p>
                </div>
            </div>

            <!-- ìœµí•© ì„¹ì…˜ - ì¬ë””ìì¸ -->
            <div class="fusion-section">
                <div class="fusion-container">
                    <!-- ì‹¬ë¦¬í•™ ì‹¬ë³¼ -->
                    <div class="symbol-card psychology">
                        <div class="symbol-card-inner">
                            <div class="symbol-aura"></div>
                            <div class="symbol-icon">
                                <svg viewBox="0 0 24 24">
                                    <circle cx="12" cy="8" r="4"/>
                                    <path d="M12 12c-4 0-7 2-7 5v2h14v-2c0-3-3-5-7-5z"/>
                                    <path d="M12 3v-1M8 5l-1-1M16 5l1-1" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <span class="symbol-label">Psychology</span>
                            <span class="symbol-sublabel">ì‹¬ë¦¬</span>
                        </div>
                    </div>

                    <!-- ì—°ê²° ìš”ì†Œ -->
                    <div class="fusion-connector">
                        <div class="connector-line"></div>
                        <span class="connector-symbol">âˆ</span>
                        <div class="connector-line"></div>
                    </div>

                    <!-- ìš´ì„¸ ì‹¬ë³¼ -->
                    <div class="symbol-card fortune">
                        <div class="symbol-card-inner">
                            <div class="symbol-aura"></div>
                            <div class="symbol-icon">
                                <svg viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="8"/>
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M12 4v2M12 18v2M4 12h2M18 12h2" stroke-linecap="round"/>
                                    <path d="M6.3 6.3l1.4 1.4M16.3 16.3l1.4 1.4M6.3 17.7l1.4-1.4M16.3 7.7l1.4-1.4" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <span class="symbol-label">Fortune</span>
                            <span class="symbol-sublabel">ìš´ëª…</span>
                        </div>
                    </div>
                </div>
                <p class="fusion-tagline"><span>ë‘ ì„¸ê³„ì˜ ì§€í˜œê°€ ë§Œë‚˜ë‹¤</span></p>
            </div>
        </div>

        <!-- ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„° -->
        <div class="scroll-indicator" onclick="scrollToForm()">
            <span>SCROLL</span>
            <div class="scroll-arrow"></div>
        </div>
    </section>

    <!-- ==========================================
         ë©”ì¸ ì„¹ì…˜ - ì…ë ¥ í¼ & ê²°ê³¼
    ========================================== -->
    <section class="main-section" id="form-section">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>

        <div class="container">
            <div class="section-intro">
                <h2>ê¿ˆì„ ê¸°ë¡í•˜ì„¸ìš”</h2>
                <p>ê¸°ì–µë‚˜ëŠ” ëª¨ë“  ê²ƒì„ ì ì–´ì£¼ì„¸ìš”. ì‘ì€ ë‹¨ì„œë„ í° ì˜ë¯¸ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.</p>
            </div>

            <main>
                <section id="input-section" class="dream-form">
                    <div class="form-group">
                        <label>âœ¨ ê¿ˆì˜ ì¤„ê±°ë¦¬</label>
                        <textarea id="dream-story" rows="4" placeholder="ì–´ì ¯ë°¤ ê¿ˆ ë‚´ìš©ì„ ìµœëŒ€í•œ ìì„¸íˆ ê¸°ë¡í•´ì£¼ì„¸ìš”."></textarea>
                    </div>
                    <div class="form-group">
                        <label>ğŸ—ï¸ í•µì‹¬ ìƒì§•ë¬¼</label>
                        <textarea id="dream-symbols" rows="2" placeholder="ê¸°ì–µì— ë‚¨ëŠ” ë¬¼ê±´, ë™ë¬¼, ìƒ‰ê¹”, ìˆ«ì ë“±"></textarea>
                    </div>
                    <div class="form-group">
                        <label>ğŸŒŠ ê¿ˆì† ê°ì • & í˜„ì¬ ìƒí™©</label>
                        <textarea id="dream-emotion" rows="3" placeholder="ê¿ˆì—ì„œ ëŠë‚€ ê°ì •ê³¼ ìµœê·¼ ê³ ë¯¼ê±°ë¦¬"></textarea>
                    </div>
                    <button id="analyze-btn" class="btn-analyze" onclick="startAnalysis()">ë¬´ì˜ì‹ì˜ ë¬¸ ì—´ê¸°</button>
                    <div id="error-message" class="error-message"></div>
                </section>

                <section id="loading">
                    <div class="spinner"></div>
                    <p style="color: var(--accent-gold); letter-spacing: 1px;">ë³„ë“¤ì˜ ìœ„ì¹˜ë¥¼ ê³„ì‚°í•˜ê³  ë¬´ì˜ì‹ì˜ ì‹¬ì—°ì„ ë“¤ì—¬ë‹¤ë´…ë‹ˆë‹¤...</p>
                </section>

                <section id="result">
                    <div class="result-card psychology">
                        <h2 class="result-title">ğŸ§  ë¬´ì˜ì‹ì˜ ì‹¬ë¦¬ ë¶„ì„</h2>
                        <div id="psychology-content" class="result-content"></div>
                    </div>

                    <div class="result-card prophecy">
                        <h2 class="result-title">ğŸ”® ë¯¸ë˜ ì˜ˆì–¸ì  í•´ì„</h2>
                        <div id="prophecy-content" class="result-content"></div>
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn-analyze" style="background: transparent; border: 1px solid var(--accent-purple);" onclick="resetForm()">ë‹¤ë¥¸ ê¿ˆ ê¸°ë¡í•˜ê¸°</button>
                    </div>
                </section>
            </main>

            <footer>
                <p>Morpheus Twinì€ ë‹¹ì‹ ì˜ ê¿ˆì„ ì‘ì›í•©ë‹ˆë‹¤.<br>ì´ í•´ì„ì€ ìƒì§•ì  ì˜ë¯¸ì¼ ë¿, ìš´ëª…ì€ ë‹¹ì‹ ì˜ ì„ íƒìœ¼ë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.</p>
            </footer>
        </div>
    </section>

    <script>
        // ============================================
        // ë³„ ìƒì„±
        // ============================================
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 120;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                const size = Math.random() * 2.5 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                star.style.animationDelay = Math.random() * 5 + 's';
                
                starsContainer.appendChild(star);
            }
        }

        // ============================================
        // ë– ë‹¤ë‹ˆëŠ” ì…ì ìƒì„±
        // ============================================
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 15;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                particle.style.animationDelay = Math.random() * 15 + 's';
                
                const colors = [
                    'rgba(187, 134, 252, 0.5)',
                    'rgba(212, 175, 55, 0.4)',
                    'rgba(37, 117, 252, 0.35)'
                ];
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                
                particlesContainer.appendChild(particle);
            }
        }

        // ============================================
        // ìŠ¤í¬ë¡¤ í•¨ìˆ˜
        // ============================================
        function scrollToForm() {
            document.getElementById('form-section').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // ì´ˆê¸°í™”
        createStars();
        createParticles();

        // ============================================
        // API ì„¤ì • (Vercel Serverless Function)
        // ============================================
        // ë°°í¬ í›„ì—ëŠ” ìƒëŒ€ ê²½ë¡œ ì‚¬ìš©, ë¡œì»¬ì—ì„œëŠ” ì§ì ‘ Gemini í˜¸ì¶œ
        const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        const DREAM_API_URL = '/api/analyze';

        // DOM ìš”ì†Œ ìºì‹±
        const inputSection = document.getElementById('input-section');
        const loadingSection = document.getElementById('loading');
        const resultSection = document.getElementById('result');
        const errorMessage = document.getElementById('error-message');
        const analyzeBtn = document.getElementById('analyze-btn');

        const dreamStory = document.getElementById('dream-story');
        const dreamSymbols = document.getElementById('dream-symbols');
        const dreamEmotion = document.getElementById('dream-emotion');

        const psychologyContent = document.getElementById('psychology-content');
        const prophecyContent = document.getElementById('prophecy-content');

        /**
         * ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì‚¬
         */
        function validateInput() {
            const story = dreamStory.value.trim();
            const symbols = dreamSymbols.value.trim();
            const emotion = dreamEmotion.value.trim();

            if (!story && !symbols && !emotion) {
                showError("ê¿ˆì˜ íŒŒí¸ì„ ì¡°ê¸ˆì´ë¼ë„ ê¸°ë¡í•´ì£¼ì…”ì•¼ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                return false;
            }
            return true;
        }

        /**
         * ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
         */
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
        }

        /**
         * í™”ë©´ ì „í™˜ í•¨ìˆ˜
         */
        function showSection(section) {
            inputSection.style.display = 'none';
            loadingSection.style.display = 'none';
            resultSection.style.display = 'none';

            if (section === 'input') inputSection.style.display = 'block';
            else if (section === 'loading') loadingSection.style.display = 'block';
            else if (section === 'result') resultSection.style.display = 'block';
        }

        /**
         * ê¿ˆ ë¶„ì„ ì‹œì‘
         */
        async function startAnalysis() {
            if (!validateInput()) return;

            showSection('loading');
            analyzeBtn.disabled = true;

            const dreamData = {
                story: dreamStory.value.trim(),
                symbols: dreamSymbols.value.trim(),
                emotion: dreamEmotion.value.trim()
            };

            try {
                const result = await callDreamAPI(dreamData);
                displayResult(result);
                showSection('result');
                document.getElementById('form-section').scrollIntoView({ behavior: 'smooth' });

            } catch (error) {
                console.error('ë¶„ì„ ì˜¤ë¥˜:', error);
                showSection('input');
                showError(error.message || 'ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            } finally {
                analyzeBtn.disabled = false;
            }
        }

        /**
         * ê¿ˆ ë¶„ì„ API í˜¸ì¶œ
         */
        async function callDreamAPI(dreamData) {
            try {
                const response = await fetch(DREAM_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dreamData)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    console.error('API ì˜¤ë¥˜ ìƒì„¸:', errorData);
                    throw new Error(errorData.error || `API ì˜¤ë¥˜: ${response.status}`);
                }

                const result = await response.json();
                
                if (result.error) {
                    throw new Error(result.error);
                }

                return {
                    psychology: result.psychology || 'ì‹¬ë¦¬ ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
                    prophecy: result.prophecy || 'ì˜ˆì–¸ì  í•´ì„ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
                };

            } catch (error) {
                console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', error);
                throw error;
            }
        }

        /**
         * ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
         */
        function displayResult(result) {
            psychologyContent.innerHTML = formatResultText(result.psychology, 'psychology') || 'ì‹¬ë¦¬ ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
            prophecyContent.innerHTML = formatResultText(result.prophecy, 'prophecy') || 'ì˜ˆì–¸ì  í•´ì„ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
        }

        /**
         * ê²°ê³¼ í…ìŠ¤íŠ¸ í¬ë§·íŒ… í•¨ìˆ˜
         */
        function formatResultText(text, type) {
            if (!text) return '';

            let formatted = text;

            // 0. ê¸°ì¡´ HTML íƒœê·¸ ì´ìŠ¤ì¼€ì´í”„ ë°©ì§€ë¥¼ ìœ„í•´ <strong> íƒœê·¸ ë³´ì¡´
            // (Geminiê°€ ì´ë¯¸ <strong> íƒœê·¸ë¥¼ ë„£ì—ˆì„ ìˆ˜ ìˆìŒ)

            // 1. **ë§ˆí¬ë‹¤ìš´ ê°•ì¡°**ë¥¼ <strong>ìœ¼ë¡œ ë³€í™˜ (ê°€ì¥ ë¨¼ì €)
            formatted = formatted.replace(
                /\*\*([^*]+)\*\*/g,
                '<strong>$1</strong>'
            );

            // 2. ë©”ì¸ ì œëª© ê°ì§€ (ì²« ì¤„ì´ë‚˜ "ì œëª©:" íŒ¨í„´)
            // "ë‹¹ì‹  ë¬´ì˜ì‹ì˜ ë¹„ë°€ ì§€ë„" ê°™ì€ í˜•íƒœ
            formatted = formatted.replace(
                /^["ã€Œã€]([^"ã€ã€\n]+)["ã€ã€]/gm,
                '<span class="result-main-title">$1</span>'
            );

            // ì œëª©: í˜•íƒœ
            formatted = formatted.replace(
                /^ì œëª©:\s*["ã€Œã€]?([^"ã€ã€\n]+)["ã€ã€]?$/gm,
                '<span class="result-main-title">$1</span>'
            );

            // 3. ì†Œì œëª© íŒ¨í„´ë“¤
            // â– , â—, â–¶, â—†, â˜… ë“±ìœ¼ë¡œ ì‹œì‘
            formatted = formatted.replace(
                /^[â– â—â–¶â—†â—‡â˜…â˜†â–ºâ–ªâ€¢]\s*(.+)$/gm,
                '<span class="result-subtitle">$1</span>'
            );

            // ã€ì œëª©ã€‘ í˜•íƒœ
            formatted = formatted.replace(
                /ã€([^ã€‘]+)ã€‘/g,
                '<span class="result-subtitle">$1</span>'
            );

            // [ì œëª©] í˜•íƒœ
            formatted = formatted.replace(
                /^\[([^\]]+)\]$/gm,
                '<span class="result-subtitle">$1</span>'
            );

            // ìˆ«ì. **ì œëª©** ë˜ëŠ” ìˆ«ì. ì œëª©
            formatted = formatted.replace(
                /^(\d+)\.\s*<strong>([^<]+)<\/strong>/gm,
                '<span class="result-subtitle">$1. $2</span>'
            );

            formatted = formatted.replace(
                /^(\d+)\.\s+([ê°€-í£]+[ê°€-í£\s]*:)/gm,
                '<span class="result-subtitle">$1. $2</span>'
            );

            // "### ì œëª©" ë§ˆí¬ë‹¤ìš´ í—¤ë”
            formatted = formatted.replace(
                /^#{1,3}\s+(.+)$/gm,
                '<span class="result-subtitle">$1</span>'
            );

            // 4. ê¸¸ëª½/í‰ëª½/ê²½ê³ ëª½ ë°°ì§€
            formatted = formatted.replace(
                /(ê¸¸ëª½|å‰å¤¢)/g,
                '<span class="badge-good">$1</span>'
            );
            formatted = formatted.replace(
                /(í‰ëª½|å‡¶å¤¢)/g,
                '<span class="badge-bad">$1</span>'
            );
            formatted = formatted.replace(
                /(ê²½ê³ ëª½|è­¦å‘Šå¤¢)/g,
                '<span class="badge-warning">$1</span>'
            );

            // 5. ì¡°ì–¸/ê²°ë¡  ì˜ì—­ ê°ì§€
            formatted = formatted.replace(
                /^(ê²°ë¡  ë°[^:\n]*:|ì‹¬ë¦¬ì  ì¡°ì–¸:|í–‰ë™ ì§€ì¹¨:|ì¡°ì–¸:)\s*/gm,
                '<span class="result-advice"><strong>$1</strong> '
            );

            // 6. ë©´ì±…ì¡°í•­
            formatted = formatted.replace(
                /(ì´ í•´ì„ì€ ê¿ˆì˜ ìƒì§•ê³¼[^.]*\.)/g,
                '<span class="result-disclaimer">$1</span>'
            );
            formatted = formatted.replace(
                /(ìµœì¢…ì ì¸ ì„ íƒê³¼ íŒë‹¨ì€[^.]*\.)/g,
                '<span class="result-disclaimer">$1</span>'
            );

            // 7. êµ¬ë¶„ì„ 
            formatted = formatted.replace(
                /^[-â”€â”=]{3,}$/gm,
                '<span class="result-divider"></span>'
            );
            formatted = formatted.replace(
                /^\*{3,}$/gm,
                '<span class="result-divider"></span>'
            );

            // 8. ë¹ˆ ì¤„ì„ ë¬¸ë‹¨ êµ¬ë¶„ìœ¼ë¡œ
            formatted = formatted.replace(/\n\n+/g, '</p><p>');
            formatted = '<p>' + formatted + '</p>';
            formatted = formatted.replace(/<p><\/p>/g, '');

            // 9. ë‹¨ì¼ ì¤„ë°”ê¿ˆì„ <br>ë¡œ
            formatted = formatted.replace(/\n/g, '<br>');

            return formatted;
        }

        /**
         * í¼ ì´ˆê¸°í™” ë° ì¬ì‹œì‘
         */
        function resetForm() {
            dreamStory.value = '';
            dreamSymbols.value = '';
            dreamEmotion.value = '';
            showSection('input');
            document.getElementById('form-section').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
